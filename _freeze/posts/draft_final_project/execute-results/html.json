{
  "hash": "fc4353a6564b33f921ea62dc4e64420a",
  "result": {
    "markdown": "---\ntitle: \"Draft\"\nauthor: \"Erika Nagai\"\ndesription: \"First iteration of the class project\"\ndate: \"07/18/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - final project\n  - Erika Nagai\n  - dplyr\neditor: \n  markdown: \n    wrap: 72\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(dplyr)\nlibrary(ggplot2)\n#install.packages(\"gridExtra\")\nlibrary(gridExtra)\nlibrary(AER)\n\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n# \\-\\-\\-- For Final Project ----\n\n## Overview:\n\nThis analysis was done for in-class assignment for DACSS 603\nIntroduction to Quantitative Analysis at the University of\nMassachusetts, Amherst.\n\nMy analysis is about Japanese moviegoers' behavior and trend over last\n20 years. As this\n[article](https://www.washingtonpost.com/business/avatar-struggles-show-how-japan-is-ditching-hollywood/2022/12/22/09197536-8234-11ed-8738-ed7217de2775_story.html)\nsuggests, recent Hollywood movies are struggling in Japanese market.\nThis might suggest that Japanese people are favoring domestic movies\nbecause they are getting more close-minded or Japanese movie industry is\ngetting mature and more attractive for Japanese audience.\n\nMy research questions are:\n\n1.  **How has Japanese moviegoers' behavior changed over 20 years?**\n2.  **What kind of movies attract Japanese movies?**\n\n## Dataset\n\nI used two datasets from two different sources. 1. By-year dataset\n(`year`) I gathered the data about general information (total box office\nrevenue, total \\# of people who went to movie theaters, \\# of screens)\nof every year from 2000 to 2022.\n(<http://www.eiren.org/statistics_e/index.html>)\n\n2.  By-movie dataset ('ranking') I gatehrered the data of Top 100 movies\n    in box office revenue in Japan for the last 20 years (2002-2022) by\n    scraping data available on Box Office Mojo by IMDbPro\n    (<https://www.boxofficemojo.com/year/2022/?area=JP&grossesOption=totalGrosses&sort=rank&sortDir=asc>)\n\n    2022 should be changed to the year you want to refer to.\n\nThen, I added more detailed information about the movies using the\ndataset of movies available on TMdb\n(<https://www.kaggle.com/datasets/akshaypawar7/millions-of-movies>) as\nof July 14th, 2023 to complement useful information on movies' language\nand genres.\n\n## Description of dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read in data\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"C:/Users/Microsoft/Desktop/603_Summer2023_Sec_1/posts\"\n```\n:::\n\n```{.r .cell-code}\nyear <- read_csv(\"data_ErikaNagai/revised_year.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\nRows: 23 Columns: 15\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \",\" dbl\n(15): ...1, year, total_screens, jp_movies, foreign_movies, total_movies...\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -> `...1`\n```\n:::\n\n```{.r .cell-code}\nranking <- read_csv(\"data_ErikaNagai/merged_ranking.csv\") %>% \n  filter(rank <=100) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 3463 Columns: 35\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (17): original_title, release_date, distributor, revised_release_date, r...\ndbl (17): year, rank, gross, total_gross, order, release_year, id, JP_releas...\nlgl  (1): re_released\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nranking$anime <- as.factor(ranking$anime)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nspc_tbl_ [23 × 15] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ ...1                : num [1:23] 0 1 2 3 4 5 6 7 8 9 ...\n $ year                : num [1:23] 2000 2001 2002 2003 2004 ...\n $ total_screens       : num [1:23] 1123 1259 1396 1533 1766 ...\n $ jp_movies           : num [1:23] 282 281 293 287 310 356 417 407 418 448 ...\n $ foreign_movies      : num [1:23] 362 349 347 335 339 375 404 403 388 314 ...\n $ total_movies        : num [1:23] 644 630 640 622 649 731 821 810 806 762 ...\n $ moviegoers          : num [1:23] 135390 163280 160767 162347 170092 ...\n $ ticket_price        : num [1:23] 1262 1226 1224 1252 1240 ...\n $ jp_revenue          : num [1:23] 54334 78144 53294 67125 79054 ...\n $ foreign_revenue     : num [1:23] 116528 122010 143486 136134 131860 ...\n $ total_revenue       : num [1:23] 170862 200154 196780 203259 210914 ...\n $ jp_share            : num [1:23] 31.8 39 27.1 33 37.5 41.3 53.2 47.7 59.5 56.9 ...\n $ foreign_share       : num [1:23] 68.2 61 72.9 67 62.5 58.7 46.8 52.3 40.5 43.1 ...\n $ cinecons_screens    : num [1:23] 1123 1259 1396 1533 1766 ...\n $ non_cinecons_screens: num [1:23] 1123 1259 1396 1533 1766 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   ...1 = col_double(),\n  ..   year = col_double(),\n  ..   total_screens = col_double(),\n  ..   jp_movies = col_double(),\n  ..   foreign_movies = col_double(),\n  ..   total_movies = col_double(),\n  ..   moviegoers = col_double(),\n  ..   ticket_price = col_double(),\n  ..   jp_revenue = col_double(),\n  ..   foreign_revenue = col_double(),\n  ..   total_revenue = col_double(),\n  ..   jp_share = col_double(),\n  ..   foreign_share = col_double(),\n  ..   cinecons_screens = col_double(),\n  ..   non_cinecons_screens = col_double()\n  .. )\n - attr(*, \"problems\")=<externalptr> \n```\n:::\n:::\n\n\n### Are Japanese people watching more movies recently?\n\n**The number of Japanese moviegoers increased over last 20 years and\npeaked in 2019, however, it dropped significantly in 2020 due to the\nCOVID, and it has not recovered to the pre-pandemic level yet.**\n\nFrom the year 2000 to 2019, the number of people visiting cinemas\nincreased from below 1,400,000 to over 180,000. During the period from\n2000 to 2010, there were relatively minor fluctuations, hovering around\n160,000 per year. However, in 2011, likely due to the impact of the\nGreat East Japan Earthquake, there was a decrease in moviegoers.\nSubsequently, from 2011 to 2019, there was a significant increase in the\nnumber of people going to the movies.\n\nIn the year 2020, the movie industry experienced a severe setback due to\nthe COVID-19 pandemic, with the number of cinema-goers nearly halved.\nAlthough there has been a gradual recovery since then, the industry is\nyet to reach pre-pandemic levels as of the present time.\n\nHowever, due to the COVID-19 pandemic, the number of moviegoers in 2020\ndecreased to less than 100,000,000, and it is still struggling to\nrecover to the level of 2019. The number of moviegoers in 2021 is almost\nhalf of that in 2019.\n\nIndeed, box office revenue reflects a similar trend to the number of\npeople who visited cinemas since it is calculated by multiplying the\nnumber of moviegoers with the ticket price.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis1 <- year %>%\n  ggplot(aes(x=year, y=total_revenue)) +\n  geom_line() +\n  labs(title = \"The amount of box office revenue in Japan (in million Yen)\",\n       y = \"Million yen\")\n\nvis2 <- year %>%\n  ggplot(aes(x=year, y=moviegoers)) +\n  geom_line() +\n  labs(title = \"The number of moviegoers in Japan\",\n       y = \"People\")\n\n\ngridExtra::grid.arrange(vis1, vis2, nrow = 2)\n```\n\n::: {.cell-output-display}\n![](draft_final_project_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### What would be the reason for increase of Japanese moviegoers??\n\n**The overall increase of Japanese moviegoers in Japan is partly due to\nthe increase of more available movie options, which is likely to be\ncaused by the increase of the number of movie screens.**\n\nThe number of the screens available for movies in Japan almost tripled\nfrom 2022 to 2022 even though it showed a slight stagnation from 2008 to\n2011, which might have been because of the Lehman shock.\n\nAlthough the number of released movies in Japan has been heavily\naffected by both the Lehman shock and the COVID-19 pandemic, it\nincreased almost 80% from 2000 to 2022.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvis1 <- year %>%\n  ggplot(aes(x=year, y=total_movies)) +\n  geom_line() +\n  labs(title = \"The number of movies released in Japan\",\n       y = \"movies\")\n\nvis2 <- year %>%\n  ggplot(aes(x=year, y=total_screens)) +\n  geom_line() +\n  labs(title = \"The number of movie screens in Japan\",\n       y = \"screens\")\n\n\ngridExtra::grid.arrange(vis1, vis2, nrow = 2)\n```\n\n::: {.cell-output-display}\n![](draft_final_project_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n**According to the above data, we can say that Japanese movie industry\nwas becoming more mature in terms of revenue, number of moviegoers,\nnumber of movies, number of theaters until 2019. The number of\nmoviegoers almost recovered to the pre-pandemic level, thus Japanese\npeople are still interested in watching movies in theaters even though\nthe industry has not recovered fully yet.**\n\n### How did Japanese moviegoers' taste change?\n\n**The year 2008 marks a significant turning point in the trend of\nmoviegoing in Japan. Before 2008, foreign films were more popular and\ngenerated higher box office revenues compared to domestic films.\nHowever, from 2008 onwards, the situation changed, and Japanese films\nstarted to dominate in terms of box office earnings.**\n\nIn 2020, the COVID-19 pandemic impacted both Japanese and foreign films,\nresulting in reduced box office revenues. However, the decline in box\noffice revenue for foreign films was significantly greater than that of\nJapanese films.\n\nAfter 2020, Japanese films gradually recovered their box office revenue\nto pre-pandemic levels, and in 2022, they recorded the second-highest\nbox office revenue in the past 20 years. On the other hand, the box\noffice revenue for foreign films is yet to return to its pre-pandemic\nlevels.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear %>%\n  select(c('year', 'jp_revenue', 'foreign_revenue')) %>%\n  pivot_longer(cols=c('jp_revenue', 'foreign_revenue'), names_to = 'region', values_to = 'revenue') %>%\n  ggplot(aes(x=year, y=revenue, color=region)) +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](draft_final_project_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nThe exact reason for the shift in Japanese audiences' preference from\nforeign films to Japanese films is not fully understood. However, it\nseems that the increase in the number of domestically produced films\nalone is **not** be the sole cause. This is because the number of\nforeign films being screened in Japanese cinemas has also increased over\ntime.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear %>%\n  select(c('year', 'jp_movies', 'foreign_movies')) %>%\n  pivot_longer(cols=c('jp_movies', 'foreign_movies'), names_to = 'region', values_to = 'number_movies') %>%\n  ggplot(aes(x=year, y=number_movies, color=region)) +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](draft_final_project_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nThis graph shows the region of Top 100 movies in terms of box office\nrevenue in Japan for the last 20 years. It clearly illustrates the shift\nin dominance from foreign films to Japanese films.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nranking %>%\n  ggplot(aes(x=year, y=rank, color=region, size=gross)) +\n  geom_point() +\n  coord_flip() +\n  scale_x_reverse() +\n  scale_color_manual(values = c('coral', 'darkturquoise', 'grey'))+\n  labs(title=\"The origin region of top 100 movies in Japan\",\n       x='Year',\n       y='Rank') +\n  theme(legend.position='bottom')+\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](draft_final_project_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThe below graph demonstrates if the top 100 movies in Japan were\nanimation or not. It shows that more Japanese animation movies are\ngaining popularity in Japan in recent years.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nranking %>%\n  filter(region!=\"Unknown\") %>%\n  ggplot(aes(x=year, y=rank, color=anime, size=gross)) +\n  geom_point() +\n  coord_flip() +\n  scale_x_reverse() +\n  scale_color_manual(values = c('grey', 'pink'), labels=c(\"No animation\", \"Animation\"))+\n  scale_shape_manual(values = c(4, 3)) +\n  labs(title=\"The genre of top 100 movies in Japan\",\n       x='Year',\n       y='Rank') +\n  theme_minimal() +\n  facet_grid(~region) +\n  labs(color = \"Genre \\n(Anime or not)\", size = \"Box office\\nrevenue \\n (in million USD)\") \n```\n\n::: {.cell-output-display}\n![](draft_final_project_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# ranking %>% \n#   filter(year<2021) %>%\n#   mutate(before_2008 = case_when(\n#     year <2018 ~ \"2002-2007\",\n#     TRUE ~ \"2008-2020\"\n#   )) %>%\n#   ggplot(aes(x=gross, y=revenue, color=region))+\n#   labs(x='Revenue in Japan (million USD)', y='Revenue in world (million USD)')+\n#   geom_point() +\n#   scale_color_manual(values = c('coral', 'darkturquoise', 'grey'))+\n#   labs(title = \"Correlation between box office revenue in world and in Japan\") +\n#   facet_grid(~before_2008)\n```\n:::\n\n\n## 2002-2007 vs. 2008-2020\n\nThe above line graph showed that the Japanese moviegoers' trend reversed\naround 2008; before 2008 foreign movies had more audience and made more\nmoney in Japan than Japanese movies and after 2008 Japanese movies are\nmaking more money.\n\nI dropped 2021 and 2022 data because many of the movies from recent\nyears don't have global_revenue data.\n\nHere, I compare two periods (2002-2007 / 2008-2020) to figure out how\nthe Japanese movie industry has changed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nranking_before <- \n  ranking %>% filter(year < 2008)\n\nranking_after <-\n  ranking %>% filter(year >= 2008 & year < 2021)\n\nlm_before <- lm(gross~region+anime+global_revenue, data = ranking_before)\nlm_after <- lm(gross~region+anime+global_revenue, data = ranking_after)\n```\n:::\n\n\n#### 2002-2007:\n\nThe coefficient of Region Japan (the movie is from Japan) and global\nrevenue are statistically significant and positive at 5% level.\n\nThe coefficient of Anime (the movie is animation) is not statistically\nsignificant at 5% level nor 10% level.\n\n**Joint hypothesis test**: F-score is quite big and is statistically\nsignificant at 5%.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(\"----------Linear Regression 2002-2007 -------------\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"----------Linear Regression 2002-2007 -------------\"\n```\n:::\n\n```{.r .cell-code}\nprint(summary(lm_before))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = gross ~ region + anime + global_revenue, data = ranking_before)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-44241953  -6737246  -1544223   3365418 130476479 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    -1.586e+04  9.856e+05  -0.016   0.9872    \nregionJapan     1.425e+07  1.552e+06   9.183   <2e-16 ***\nanime1         -3.480e+06  1.784e+06  -1.951   0.0516 .  \nglobal_revenue  6.134e-02  3.147e-03  19.494   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 13500000 on 501 degrees of freedom\n  (95 observations deleted due to missingness)\nMultiple R-squared:  0.4337,\tAdjusted R-squared:  0.4303 \nF-statistic: 127.9 on 3 and 501 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nprint(coeftest(lm_before, vcov. = vcovHC, type = \"HC1\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nt test of coefficients:\n\n                  Estimate  Std. Error t value  Pr(>|t|)    \n(Intercept)    -1.5856e+04  8.0137e+05 -0.0198    0.9842    \nregionJapan     1.4248e+07  1.9516e+06  7.3005 1.133e-12 ***\nanime1         -3.4803e+06  2.1575e+06 -1.6131    0.1073    \nglobal_revenue  6.1343e-02  5.0673e-03 12.1057 < 2.2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n:::\n\n\n**2008 - 2020:**\n\nThe coefficient of Region Japan (the movie is from Japan), global\nrevenue, and anime (the movie is animation) are statistically\nsignificant and positive at 5% level.\n\n**Joint hypothesis test**: F-score is quite big and is statistically\nsignificant at 5%.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(\"----------Linear Regression 2008-2020 --------------\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"----------Linear Regression 2008-2020 --------------\"\n```\n:::\n\n```{.r .cell-code}\nprint(summary(lm_after))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = gross ~ region + anime + global_revenue, data = ranking_after)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-79164498  -8253061  -2783661   3919451 194435411 \n\nCoefficients:\n                Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    1.352e+06  1.102e+06   1.227     0.22    \nregionJapan    1.184e+07  1.365e+06   8.671  < 2e-16 ***\nanime1         8.714e+06  1.480e+06   5.887 5.37e-09 ***\nglobal_revenue 3.322e-02  1.964e-03  16.917  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 17500000 on 1004 degrees of freedom\n  (292 observations deleted due to missingness)\nMultiple R-squared:  0.2553,\tAdjusted R-squared:  0.2531 \nF-statistic: 114.7 on 3 and 1004 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nprint(coeftest(lm_after, vcov. = vcovHC, type = \"HC1\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nt test of coefficients:\n\n                 Estimate Std. Error t value  Pr(>|t|)    \n(Intercept)    1.3516e+06 1.4853e+06  0.9099    0.3631    \nregionJapan    1.1837e+07 1.6467e+06  7.1883 1.279e-12 ***\nanime1         8.7135e+06 2.2227e+06  3.9202 9.449e-05 ***\nglobal_revenue 3.3225e-02 4.6556e-03  7.1365 1.833e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n\n```{.r .cell-code}\nafter_coefficient <- coeftest(lm_after, vcov. = vcovHC, type = \"HC1\")\n```\n:::\n\n\n### Comparison of linear regression models\n\nComparing the periods before and after 2008, the coefficient for the\nvariable representing Japanese films decreased slightly from 1.423e+07\nto 1.183e+07. On the other hand, the coefficient for the variable\nrepresenting anime films was not statistically significant before 2008,\nbut it became statistically significant at 8.7133e+00 after 2008.\n\nFrom this observation, it could be inferred that the difference between\nthe periods before and after 2008 is not merely a preference shift\ntowards Japanese films, but rather a preference for Japanese anime\nfilms, which are more prevalent in the post-2008 era.\n\nRegarding the coefficient for the variable representing international\nbox office revenue, it decreased from 6.13e-02 to 3.323e-02. This\nsuggests that after 2008, Japanese box office revenue has deviated from\ninternational box office revenue.\n\nComparing the explanatory variables, before 2008, the origin of the\nfilm, whether it is anime, and international box office revenue\nexplained 43% of the variance in domestic box office revenue in Japan.\nHowever, after 2008, they only explain 23% of the variance, indicating\nthat other factors have become more critical in explaining box office\nrevenue in Japan.\n\nIn conclusion, the analysis indicates that the period after 2008 saw a\npreference for Japanese anime films and a deviation in Japanese box\noffice revenue from international box office revenue. Additionally,\nother factors have become more influential in explaining box office\nrevenue in Japan since 2008.\n",
    "supporting": [
      "draft_final_project_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}